技术框架
sofa-boot
sofa-rpc
mysql-mybatis
缓存：redis
消息中间：rabbitmq
注册中心：zookeeper

多数据源切换和事务注解：这里有两个AOP，一个是事务的AOP，另一个是自定义的切换数据源的AOP，那么这里就有一个顺序的问题了，默认基于注解的声明式事务它的order值是最大的意味着它的顺序在最后面。事务当然一般是放在Service层，如果我们切换数据源的AOP定义在Dao层，那么事务永远用的是主数据源，因为在进到Service时线程上下文中还没有明确的数据源标识，因而用默认的数据源，而默认的正是主数据源。如果切换数据源的AOP定义在Service，也就是事务和数据源切换都在Service层，这个时候进到Service方式时由于切换数据源在前事务在后，所以事务用哪个数据源完全取决于这个Service方法的命名。另外，至于说调用同一个类（Service或者Dao）中的方法导致AOP不生效，或者命名是一个查询的方法，但是里面非要做查询以外的操作，这些就属于写法的问题了，而不属于切换数据源引起的事务问题了。
